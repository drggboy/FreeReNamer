---
description: 重命名冲突检测系统
globs: src/routes/profile/route.tsx
---

# 重命名冲突检测系统

## 核心原则
在执行重命名前必须进行冲突检查，确保不会产生文件名冲突。

## 检查的冲突类型

### 1. 重复的重命名目标
多个文件将被重命名为相同的名称，这会导致重命名失败。

### 2. 与被移除文件的名称冲突  
重命名后的文件名与已从列表中移除但仍在文件系统中的文件名冲突。

**重要**：被移除的文件仍然存在于文件系统中，必须参与冲突检测。

## 冲突检查函数
- `checkRenameConflicts()` - 主要的冲突检查函数
- 位置：[src/routes/profile/route.tsx](mdc:src/routes/profile/route.tsx)

## 检查集合
需要检查的是：**最终的重命名列表 + 被移除的文件列表** 这个集合中的文件名冲突

## 执行流程
1. 收集所有重命名操作的目标名称
2. 检查重命名目标名称之间是否有重复
3. 获取被移除的文件列表（在文件系统中存在但不在当前文件列表中）
4. 检查重命名目标是否与被移除文件名冲突
5. 如有冲突，阻止执行并显示详细错误信息

## 错误提示格式
- 【重复的重命名目标】- 显示重复的目标名称和涉及的源文件
- 【与被移除文件的名称冲突】- 显示与被移除文件冲突的重命名操作